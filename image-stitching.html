<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Dirk's Home Page - Image Stitching</title>
    <meta name="description" content="">
    <meta name="author" content="Dr. Dirk Colbry">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="./theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="./theme/bootstrap.min.css" rel="stylesheet">
    <link href="./theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="./theme/local.css" rel="stylesheet">
    <link href="./theme/pygments.css" rel="stylesheet">

    <!-- So Firefox can bookmark->"abo this site" -->
        <link href="https://colbrydi.github.io/feeds/all.atom.xml" rel="alternate" title="Dirk's Home Page" type="application/atom+xml">

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
   <img src="./images/2017Dirk.jpg" align="left" width=100 hspace="20">

    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href=".">Dirk's Home Page</a>

        <div class="nav-collapse">
        <ul class="nav">
            <li><a href="/pages/teaching.html">Teaching</a></li>
            <li><a href="/category/professional.html">Blog</a></li>
            <li><a href="/pages/publications.html">Publications</a></li>
            <li><a href="/pages/contact.html">Contact</a></li>
            
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
    <div class='article'>
        <div class="content-title">
            <h1>Image Stitching</h1>
Tue 29 May 2012

by <a class="url fn" href="./author/dr-dirk-colbry.html">Dr. Dirk Colbry</a>
 


        </div>
	
        <div><p>Blog post <strong>edited</strong> by Anonymous - "Migrated to Confluence 4.0"I have a video stitching program that I wrote in MATLAB to combine twooverlapping videos into one (See figure below):<img alt="" src="https://wiki.hpcc.msu.edu/download/attachments/5411766/ChamStitch.png?version=1&amp;modificationDate=1338313379000&amp;api=v2">Combining two overlapping videos into one image is an important step in ourscientific workflow for studying chameleons. Without image stitching,researchers need to measure distances between points in different videos.Here is a link to the current MATLAB version.<a href="./images/moviestitch.m">moviestitch.m</a>The user selects a corresponding point in both images and then “stitches” themtogether using a linearly-weighted mixture of pixel values. We will call theimage in the upper left A and the image in the lower right B. The mixtureregion is the region of overlap between A and B and is the only region we needto adjust. First we calculate the shortest distance in pixels from the upperleft image and the shortest distance in pixels from the lower right image forthe overlap region. We will call these overlap shortest distances SA and SB.<img alt="" src="https://wiki.hpcc.msu.edu/download/attachments/5411766/MixtureA.png?version=1&amp;modificationDate=1338313379000&amp;api=v2"><img alt="" src="https://wiki.hpcc.msu.edu/download/attachments/5411766/MixtureB.png?version=1&amp;modificationDate=1338313379000&amp;api=v2">Next, we sum the corresponding distance values together from SA and SB to getthe total shortest distance. This will be used to normalize the distances andreturn a value between zero and one. Summing these two images together, we getthe following:<img alt="" src="https://wiki.hpcc.msu.edu/download/attachments/5411766/totaldistance.png?version=1&amp;modificationDate=1338313379000&amp;api=v2">Now, to get the weighted ratio WA and WB, we divide SA and SB by the totaldistance. If done correctly, we should be able to add any pixel in WA with thecorresponding pixel in WB and get 1.<img alt="" src="https://wiki.hpcc.msu.edu/download/attachments/5411766/AWeight.png?version=1&amp;modificationDate=1338313379000&amp;api=v2"><img alt="" src="https://wiki.hpcc.msu.edu/download/attachments/5411766/BWeight.png?version=1&amp;modificationDate=1338313379000&amp;api=v2">Finally, we calculate the new pixel value for each pixel in the overlap regionby summing the original pixel values (IA and IB) to the corresponding weightedregion and adding them together: IA<em>WB + IB</em>WA.<a href="https://wiki.hpcc.msu.edu/display/~colbrydi@msu.edu/2012/05/29/Image+Stitching">ViewOnline</a>Blogpost migrated from <a href="https://wiki.hpcc.msu.edu/display/~colbrydi@msu.edu/2012/05/29/Image+Stitching">ICER Wiki</a> using custom python script. Comment on errors below.</p></div>
	
        <hr>

        <h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'DirkColbry'; 
    var disqus_title = 'Image Stitching';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="./archives.html">Archives</a>
                <li><a href="./tags.html">Tags</a>



                <li><a href="https://colbrydi.github.io/feeds/all.atom.xml" rel="alternate">Atom feed</a></li>

            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                <li><a href="./category/fun.html">Fun</a></li>
                <li><a href="./category/professional.html">Professional</a></li>
                   
            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>
            
                <li><a href="//colbrydi.github.io/cyberambassadors/">CyberAmbassadors</a></li>
                <li><a href="//see-insight.github.io/">SEE-Insight</a></li>
                <li><a href="//colbrydi.github.io/msupelican/">Pelican / Github.io Tutorial</a></li>
                <li><a href="//cmse.msu.edu">CMSE</a></li>
                <li><a href="//www.msu.edu/">MSU</a></li>
            </ul>
            </div>



        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href=".">Dirk's Home Page</a> &copy; Dr. Dirk Colbry 2022</p>
</footer>

</div> <!-- /container -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="./theme/bootstrap-collapse.js"></script>
<script>var _gaq=[['_setAccount','UA-121560886-1'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>
 
</body>
</html>