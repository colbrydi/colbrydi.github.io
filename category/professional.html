<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Dirk's Home Page - Professional</title>
    <meta name="description" content="">
    <meta name="author" content="Dr. Dirk Colbry">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="../theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="../theme/bootstrap.min.css" rel="stylesheet">
    <link href="../theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="../theme/local.css" rel="stylesheet">
    <link href="../theme/pygments.css" rel="stylesheet">

    <!-- So Firefox can bookmark->"abo this site" -->
        <link href="https://colbrydi.github.io/feeds/all.atom.xml" rel="alternate" title="Dirk's Home Page" type="application/atom+xml">

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
   <img src="../images/2017Dirk.jpg" align="left" width=100 hspace="20">

    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href="..">Dirk's Home Page</a>

        <div class="nav-collapse">
        <ul class="nav">
            <li><a href="/pages/teaching.html">Teaching</a></li>
            <li><a href="/category/professional.html">Blog</a></li>
            <li><a href="/pages/publications.html">Publications</a></li>
            <li><a href="/pages/contact.html">Contact</a></li>
            
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
        

        


    <div class='article'>
        <div class="content-title">
            <a href="../tensorflow-and-keraspytorch-on-the-hpcc.html"><h1>Tensorflow and Keras/PyTorch on the HPCC</h1></a>
Thu 27 February 2020

by <a class="url fn" href="../author/dr-dirk-colbry.html">Dr. Dirk Colbry</a>
 


 
        </div>
        
        <div><p><img alt="The Tensorflow Logo" src="//avatars0.githubusercontent.com/u/15658638?s=200&amp;v=4"></p>
<p>Every few semesters I have a Tensorflow example I want to try on the HPCC.  I'm not an expert on the software and between the HPCC, CUDA, Tensorflow, Keras, Python, Anaconda, etc. there are a lot of continuously changing and moving parts. Seems like when I figure out how to get it working something changes.  This time around wasn't too bad so I thought I would share my latest install instructions.</p>
<h3>Step 1: Install Anaconda Python</h3>
<p>Here is a video I made a while ago about how to download and install Anaconda on the HPC.</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/g0rGb6QqBPo" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<h3>Step 2: Make a Tensor Conda Environment</h3>
<p>On one of the development nodes create a Conda environment using the following commands:</p>
<div class="highlight"><pre><span></span>conda create --prefix ./tensorflow-env tensorflow-gpu keras pytorch
conda init bash
<span class="nb">exit</span>
</pre></div>


<h3>Step 3: Test Conda</h3>
<p>Now we need to test keras and tensorflow.  I found an example on the internet and had to fix a few bugs. I am not sure how good an example is but it is good enough to run as a benchmark test. You can download the example file <a href="">here</a>, or just use the following commands on a dev-node on the HPC:</p>
<div class="highlight"><pre><span></span>wget <span class="c1">#</span>
conda activate ./tensorflow-env
<span class="nb">time</span> python convolution.py
</pre></div>


<p>Running the above took me about 8 minutes on dev-intel18 about 1.3 minutes on dev-intel16-k80 and about 2 minutes on dev-intel14-k20.  I also ran on the special volta node (nvl-001) which is only avaliable to buy-in users. That thing only to about 30 seconds. Here are the commands I used (Requires buy-in access):</p>
<div class="highlight"><pre><span></span>salloc --gres<span class="o">=</span>gpu:1 --nodelist<span class="o">=</span>nvl-001 --time<span class="o">=</span><span class="m">00</span>:10:00 --account<span class="o">=</span>cmse
conda activate ./tensorflow-env
<span class="nb">time</span> srun python convolutional.py
</pre></div>


<h3>Step 4: SLURM Script</h3>
<p>To run this in a slurm script you need to request GPUs and use the srun command. Here is an example:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="c1">#SBATCH --time=01:00:00</span>
<span class="c1">#SBATCH -c 1</span>
<span class="c1">#SBATCH -n 1</span>
<span class="c1">#SBATCH --gres=gpu:1</span>
<span class="c1">#SBATCH --mem=4gb</span>

module load powertools

<span class="c1">#conda init bash</span>
conda activate ./tensorflow-env

<span class="nb">time</span> srun python convolutional.py

js <span class="si">${</span><span class="nv">SLURM_JOB_ID</span><span class="si">}</span>
</pre></div>


<p>This installation is probably not optimal but seems to work consistently.  </p></div>
        <hr />
    </div>
		

 
        

 

    <div class='article'>
        <a href="../converting-directory-of-ipynb-to-pdfs.html"><h2>Converting directory of ipynb to pdfs</h2></a>
        <div class= "well small"> Sun 02 February 2020

by <a class="url fn" href="../author/dr-dirk-colbry.html">Dr. Dirk Colbry</a>
 


 </div>
        <div class="summary"><p><img alt="Image Showing Icons for converting from Jupyter to PDF files" src="//colbrydi.github.io/images/Jupyter2PDF.png"></p>
<p>I wanted to share the content for one of my courses with some other instructors but it turns out not everyone uses Jupyter notebooks.  </p>
<p><strong>Option 1:</strong> I decided to convert all of the notebooks to pdfs using <a href="https://nbconvert.readthedocs.io/en/latest/">nbconvert</a>.  However, <code>nbconvert</code> isn't working on my MacBook.  I think I have too …</p> <a class="btn btn-info xsmall" href="../converting-directory-of-ipynb-to-pdfs.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../live-closed-captioning.html"><h2>Live Closed Captioning</h2></a>
        <div class= "well small"> Sun 26 January 2020

by <a class="url fn" href="../author/dr-dirk-colbry.html">Dr. Dirk Colbry</a>
 


 </div>
        <div class="summary"><p><img alt="Picture of me writing on the white board with live closed captioning" src="//colbrydi.github.io/images/CC_example.png"></p>
<p>Many MSU classrooms have two overhead monitors that project on two screens at the front of class.  Each room is equipped with a technology cart that has a desktop computer, overhead camera and laptop connections that can be used to project any of the content to either screen. Up until …</p> <a class="btn btn-info xsmall" href="../live-closed-captioning.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../cmse-impact-video.html"><h2>CMSE Impact Video</h2></a>
        <div class= "well small"> Sat 14 December 2019

by <a class="url fn" href="../author/dr-dirk-colbry.html">Dr. Dirk Colbry</a>
 


 </div>
        <div class="summary"><p><img alt="Picture of me" src="//colbrydi.github.io/images/3_horiz.png"></p>
<p>Xiaoxing (Adele) Han is a videographer who made some amazing videos to help promote research being done in our department.  The following is the video she made of my research which I am very excited to share.  I think she did a great job!</p>
<iframe width="560" height="315" src="https://www.youtube.com/embed/VdsKHhncXYw" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>

<p>Thank you Adele!!!</p> <a class="btn btn-info xsmall" href="../cmse-impact-video.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../running-imagej-on-the-hpcc.html"><h2>Running ImageJ on the HPCC</h2></a>
        <div class= "well small"> Wed 04 December 2019

by <a class="url fn" href="../author/dr-dirk-colbry.html">Dr. Dirk Colbry</a>
 


 </div>
        <div class="summary"><p><img align="right," alt="Fiji logo" hspace="10" src="//imagej.net/_images/a/ae/Fiji-icon.png" width="200,"></p>
<p>A group working over in Plant and Soil Sciences are experts on ImageJ but are relatively new to the HPCC.  Together we put together a workflow for getting ImageJ up and running on the HPCC.</p>
<h3>Step 1: Log onto the HPCC with an X11 connection</h3>
<p>Log onto the HPC using …</p> <a class="btn btn-info xsmall" href="../running-imagej-on-the-hpcc.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../cmse-presentation-at-sc19.html"><h2>CMSE Presentation at SC19</h2></a>
        <div class= "well small"> Sun 17 November 2019

by <a class="url fn" href="../author/dr-dirk-colbry.html">Dr. Dirk Colbry</a>
 


 </div>
        <div class="summary"><p><img alt="SC19 Logo" src="https://sc19.supercomputing.org/app/uploads/2018/11/ogimage_1200.png"></p>
<p>I just got out of giving a presentation about the CMSE department as part of the <a href="https://sc19.supercomputing.org/session/?sess=sess104">Sixth SC Workshop on Best Practices for HPC Training and Education (BPHTE19)</a> workshop at <a href="https://sc19.supercomputing.org/">SC19</a>. It was fun to show people what we are doing in CMSE and share our progress.  <a href="//colbrydi.github.io/images/SC19_bphpcte_Colbrydi.pdf">Here is a …</a></p> <a class="btn btn-info xsmall" href="../cmse-presentation-at-sc19.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../sherpas-of-supercomputing.html"><h2>Sherpas of Supercomputing</h2></a>
        <div class= "well small"> Sun 15 September 2019

by <a class="url fn" href="../author/dr-dirk-colbry.html">Dr. Dirk Colbry</a>
 


 </div>
        <div class="summary"><p><img alt="Cover picture of the September 2019 ASEE PRISM Magazine Featuring the Sherpas of Supercomputing article" src="http://www.asee-prism.org/wp-content/uploads/2019/10/Sherpas-of-Supercomputing.jpg"></p>
<p>I had the honor of recently being featured in an ASEE PRISM Magazine article about research facilitation.  </p>
<blockquote>
<p>An essential, if not yet well-defined, field is emerging at the intersection of research and the high-performance machines that make sense of big data.
By Lucy Birmingham and Mark Matthews</p>
</blockquote>
<p><a href="http://www.asee-prism.org/sherpas-of-supercomputing/">See the full …</a></p> <a class="btn btn-info xsmall" href="../sherpas-of-supercomputing.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../developing-curriculum-to-train-graduate-students-how-to-utilize-raspberry-pis-to-automate-research-labs.html"><h2>Developing curriculum to train Graduate students how to utilize Raspberry Pis to Automate Research Labs</h2></a>
        <div class= "well small"> Wed 24 July 2019

by <a class="url fn" href="../author/dr-dirk-colbry.html">Dr. Dirk Colbry</a>
 


 </div>
        <div class="summary"><p><img alt="Picture of Shelby in front of her poster" src="//colbrydi.github.io/images/2019_ENSURE_Shelby.jpg"></p>
<p>Summer 2019 CMSE <a href="https://cmse.msu.edu/employment-opportunities/cmse-student-technical-support/">CMSE Undergraduate Intern</a> Poster presentation at MidSure by Shelby Santos</p>
<p>Raspberry Pis (RPis) are affordable microcomputers (approx. $35) that have the capability to revolutionize the accuracy and efficiency of data collection in basic laboratory environments. Recreationally, RPis can be used as a base for smart televisions, home …</p> <a class="btn btn-info xsmall" href="../developing-curriculum-to-train-graduate-students-how-to-utilize-raspberry-pis-to-automate-research-labs.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../investigation-of-the-process-of-converting-a-c-code-into-an-implementable-fpga-file.html"><h2>Investigation of the process of converting a C++ code into an implementable FPGA file</h2></a>
        <div class= "well small"> Wed 24 July 2019

by <a class="url fn" href="../author/dr-dirk-colbry.html">Dr. Dirk Colbry</a>
 


 </div>
        <div class="summary"><p><img alt="Picture of Ana in front of her poster" src="//colbrydi.github.io/images/2019_ENSURE_Ana.jpg"></p>
<p>Summer 2019 <a href="https://www.egr.msu.edu/graduate/ensure">ENSURE Student</a> Poster presentation at MidSure by Ana Flavia Borges de Almeida Barreto</p>
<p>A Field Programmable Gate Arrays (FPGAs) is an integrated circuit that can be “rewired” to become other circuits.  This ability makes FPGAs highly configurable and can significantly help speed up large scale computation used in …</p> <a class="btn btn-info xsmall" href="../investigation-of-the-process-of-converting-a-c-code-into-an-implementable-fpga-file.html">read more</a></div>
    </div>	
				

 
        

 

    <div class='article'>
        <a href="../searching-the-algorithm-space-to-automate-scientific-image-analysis-workflows.html"><h2>Searching the Algorithm Space to Automate Scientific Image Analysis Workflows</h2></a>
        <div class= "well small"> Wed 24 July 2019

by <a class="url fn" href="../author/dr-dirk-colbry.html">Dr. Dirk Colbry</a>
 


 </div>
        <div class="summary"><p><img alt="Picture of Noah in front of her poster" src="//colbrydi.github.io/images/2019_ENSURE_Noah.jpg"></p>
<p>Summer 2019 <a href="https://grad.msu.edu/srop">SROP student</a> poster presentation at MidSure by Noah Stolz</p>
<p>Scientific data is often gathered in the form of Images.  Scientific Image analysis is the process of pulling specific measurements out of images.  Which measures are important complete depend on the scientific question being asked.  For this reason, there …</p> <a class="btn btn-info xsmall" href="../searching-the-algorithm-space-to-automate-scientific-image-analysis-workflows.html">read more</a></div>
    </div>	
				
<div class="pagination">
<ul>
    <li class="prev disabled"><a href="#">&larr; Previous</a></li>

    <li class="active"><a href="../category/professional.html">1</a></li>
    <li class=""><a href="../category/professional2.html">2</a></li>
    <li class=""><a href="../category/professional3.html">3</a></li>
    <li class=""><a href="../category/professional4.html">4</a></li>
    <li class=""><a href="../category/professional5.html">5</a></li>

    <li class="next"><a href="../category/professional2.html">Next &rarr;</a></li>

</ul>
</div>
 
  
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="../archives.html">Archives</a>
                <li><a href="../tags.html">Tags</a>



                <li><a href="https://colbrydi.github.io/feeds/all.atom.xml" rel="alternate">Atom feed</a></li>

            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                <li><a href="../category/fun.html">Fun</a></li>
                <li><a href="../category/professional.html">Professional</a></li>
                   
            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>
            
                <li><a href="//colbrydi.github.io/cyberambassadors/">CyberAmbassadors</a></li>
                <li><a href="//colbrydi.github.io/msupelican/">Pelican / Github.io Tutorial</a></li>
                <li><a href="//cmse.msu.edu">CMSE</a></li>
                <li><a href="//www.msu.edu/">MSU</a></li>
            </ul>
            </div>



        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href="..">Dirk's Home Page</a> &copy; Dr. Dirk Colbry 2020</p>
</footer>

</div> <!-- /container -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="../theme/bootstrap-collapse.js"></script>
<script>var _gaq=[['_setAccount','UA-121560886-1'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>
 
</body>
</html>