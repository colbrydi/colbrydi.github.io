<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Dirk's Home Page - Managing Inconsistent Runtimes on the HPCC</title>
    <meta name="description" content="">
    <meta name="author" content="Dr. Dirk Colbry">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Le HTML5 shim, for IE6-8 support of HTML elements -->
    <!--[if lt IE 9]>
    <script src="./theme/html5.js"></script>
    <![endif]-->

    <!-- Le styles -->
    <link href="./theme/bootstrap.min.css" rel="stylesheet">
    <link href="./theme/bootstrap.min.responsive.css" rel="stylesheet">
    <link href="./theme/local.css" rel="stylesheet">
    <link href="./theme/pygments.css" rel="stylesheet">

    <!-- So Firefox can bookmark->"abo this site" -->
        <link href="https://colbrydi.github.io/feeds/all.atom.xml" rel="alternate" title="Dirk's Home Page" type="application/atom+xml">

</head>

<body>

<div class="navbar">
    <div class="navbar-inner">
   <img src="./images/2017Dirk.jpg" align="left" width=100 hspace="20">

    <div class="container">

         <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
             <span class="icon-bar"></span>
         </a>

        <a class="brand" href=".">Dirk's Home Page</a>

        <div class="nav-collapse">
        <ul class="nav">
            <li><a href="/Blog.html">Blog</a></li>
            <li><a href="/pages/publications.html">Publications</a></li>
            <li><a href="/pages/contact.html">Contact</a></li>
            
        </ul>
        </div>
        
    </div>
    </div>
</div>

<div class="container">
    <div class="content">
    <div class="row">

        <div class="span9">
    <div class='article'>
        <div class="content-title">
            <h1>Managing Inconsistent Runtimes on the HPCC</h1>
Fri 29 June 2018

by <a class="url fn" href="./author/dr-dirk-colbry.html">Dr. Dirk Colbry</a>
 


        </div>
	
        <div><p>One of our postdocs stopped by my office today to talk about a problem with inconsistant runtimes on our <a href="//icer.msu.edu">HPCC</a>.  This user is running a lot of jobs with 512 cores (current cpu limit is 520).  The problem is that it is really difficult for the user to estimate the walltimes. There is a 2x difference in walltimes on the HPCC.  The code has been tested on other large scale systems with much less variation. The user would prefer more consistent runtimes and did not mind waiting in the queue (although less queue time is better).  </p>
<p>The problem is that there are many things that can impact the runtime of a job. The HPCC runs at over 95% utilization most of the time so many of the resources are in contention.  Without additional information, my best guess is that the bottleneck is MPI communication over the high speed network. If this is the case, I hypothesize that moving more processes to the same nodes (instead of spread across the cluster) will help reduce network competition with other users and result in more consistent walltimes. Here are some things I suggested the user try:</p>
<ul>
<li>Open a ticket with iCER and see if you can set up a consulting appointment. They may be able to get much better idea about what resources are in contention and causing the bottleneck: <a href="https://contact.icer.msu.edu/contact">https://contact.icer.msu.edu/contact</a></li>
<li>Add “qstat -f ${PBS_JOBID}” to the end of the jobscript.  This will provide some stats that may help us understand differences between jobs that run fast and slow.   </li>
<li>Try different core and node ratios (ex. nodes=128:ppn=4, nodes=64:ppn=8, nodes=32:ppn=8 etc.). Although increasing the ppn will likely make queue times longer, i believe the overall runtime will be more consistent.</li>
<li>Start the process to get DOE and XSEDE allocations.  Create XSEDE Portal account here: <a href="https://portal.xsede.org/">https://portal.xsede.org/</a> and send me your login name when you get it so we can add you to the MSU campus champion account.</li>
</ul>
<p>Anyone else have a similar problem?  Other suggestions that I may have missed?</p>
<p><strong> Dirk </strong></p></div>
	
        <hr>

        <h2>Comments</h2>
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'DirkColbry'; 
    var disqus_title = 'Managing Inconsistent Runtimes on the HPCC';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
        </div>
        
        <div class="span3">

            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Site
                </li>
            
                <li><a href="./archives.html">Archives</a>
                <li><a href="./tags.html">Tags</a>



                <li><a href="https://colbrydi.github.io/feeds/all.atom.xml" rel="alternate">Atom feed</a></li>

            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Categories
                </li>
                
                <li><a href="./category/fun.html">Fun</a></li>
                <li><a href="./category/professional.html">Professional</a></li>
                   
            </ul>
            </div>


            <div class="well" style="padding: 8px 0; background-color: #FBFBFB;">
            <ul class="nav nav-list">
                <li class="nav-header"> 
                Links
                </li>
            
                <li><a href="//colbrydi.github.io/cyberambassadors/">CyberAmbassadors</a></li>
                <li><a href="//colbrydi.github.io/msupelican/">Pelican / Github.io Tutorial</a></li>
                <li><a href="//cmse.msu.edu">CMSE</a></li>
                <li><a href="//www.msu.edu/">MSU</a></li>
            </ul>
            </div>



        </div>  
    </div>     </div> 
<footer>
<br />
<p><a href=".">Dirk's Home Page</a> &copy; Dr. Dirk Colbry 2018</p>
</footer>

</div> <!-- /container -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="./theme/bootstrap-collapse.js"></script>
<script>var _gaq=[['_setAccount','UA-121560886-1'],['_trackPageview']];(function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];g.src='//www.google-analytics.com/ga.js';s.parentNode.insertBefore(g,s)}(document,'script'))</script>
 
</body>
</html>